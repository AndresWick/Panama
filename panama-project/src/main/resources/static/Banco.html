<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>Eleccion de pago</title>
<meta name="keywords" content="" />
<meta name="description" content="" />

        <script type="text/javascript" src="lib/jquery-1.3.2.min.js"></script>
		<script type="text/javascript" src="lib/jquery.tools.js"></script>	
		<script type="text/javascript" src="lib/jquery.custom.js"></script>

<link href="styles.css" rel="stylesheet" type="text/css" media="screen" />
</head>
<body>
	<div id="content">
		<div id="back">
			<!-- header begins -->
			<div id="header">
				<div id="logo" style="color: BLACK;">
					<h1>Canal De Panam√°</h1>
					<h2>Elige tu banco</h2>
				</div>				
			</div>
			<!-- header ends -->
			<!-- content begins -->
			      
				<div class="scroll_my">
					<div class="" >
						<div class="items" >
							<div class="item">
							    <div class="contenedor">
									<img src="images/header3.jpg" />						  
									<div class="centrado">
										<h3 style="color: BLACK;">
											<p> Titular: <span id="agente"></span> </p>
											<p> Valor: <span id="valor"></span> </p>
											<p> Concepto: <span id="concepto"></span> </p>
										</h3>
												
									</div>
								</div>					    			
							</div>  
						</div> <!-- items -->
					</div> <!-- scrollable -->	
				</div>
			<form>
				<div style="margin-left: 20px;"> Cuenta: <input type="number" id="cuenta"/></div>
				<div style="margin-left: 20px;"> Clave: <input type="password" id="clave"/></div>
				<div id="box1"><h2><input type="radio" name="banco" value="3">Banco Popular</h2></div>
				<div id="box2"><h2><input type="radio" name="banco" value="2">Davivienda</h2></div>
				<div id="box3"><h2><input type="radio" name="banco" value="1">BBVA</h2></div>
				
				<div id="menu" style="margin-top: 60px; margin-left: 20px;">
					<ul>						
						<li id="button4" onclick="pagar()"><a href="#">PAGAR</a></li>				
					</ul>
				</div>	
				
			</form>	
		</div>
	</div>
	<script type="text/javascript">
	$(document).ready(function() {
	    var params = window.location.search;

	    var getURLParams = function(params) {
	        var hash;
	        var json = {};
	        var hashes = params.slice(params.indexOf('?') + 1).split('&');
	        for (var i = 0; i < hashes.length; i++) {
	            hash = hashes[i].split('=');
	            json[hash[0]] = hash[1];
	        }
	        return json;
	    }

	    params = getURLParams(params);

	    var agente = params.agente;
	    var costo = params.costo;
	    var concepto = params.concepto;
	    
	    $('#agente').text(agente);
	    $('#valor').text(costo);
	    $('#concepto').text(concepto);
	});	
	function pagar(){
			var datos = {				
				user : $('#agente').text()+'B',				
				password : $('#clave').val(),				
				pk_banco : $('input[name=banco]:checked').val(),
				pk_cuenta : $('#cuenta').val(),
				pv_valor : $('#valor').text(),
				pk_concepto : $('#concepto').text()	
			}		 
				
			$.ajax({
		        url: 'http://localhost:8383/pago',
		        type: 'POST',
		        data: JSON.stringify(datos),
		        processData: false,
		        contentType: "application/json",
		        success:function(data){
		        	alert(data);
		        },
		        error:function(data){
		        	alert(data.responseText)
		        }
		    })  
		    
		}
			
	</script>	
</body>
</html>