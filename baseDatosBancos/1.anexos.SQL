-- DENTRO DE SYSTEM --
/*
CREATE TABLESPACE BancoDatos DATAFILE 'C:\temporal\banco\BancoDatos.DBF' SIZE 1024M EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
CREATE TEMPORARY TABLESPACE BancoTemp TEMPFILE 'C:\temporal\BancoTemp.DBF' SIZE 300M;

CREATE TABLESPACE pepClDatos DATAFILE 'C:\temporal\banco\pepClDatos.DBF' SIZE 500M EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
CREATE TEMPORARY TABLESPACE pepClTemp TEMPFILE 'C:\temporal\banco\pepClTemp.DBF' SIZE 200M;

CREATE TABLESPACE camClDatos DATAFILE 'C:\temporal\banco\camClDatos.DBF' SIZE 500M EXTENT MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT AUTO;
CREATE TEMPORARY TABLESPACE camCLTemp TEMPFILE 'C:\temporal\banco\camCLTemp.DBF' SIZE 200M;

CREATE USER BANCO IDENTIFIED BY banco DEFAULT TABLESPACE BancoDatos TEMPORARY TABLESPACE BancoTemp;

CREATE USER PEPEAGENTEB IDENTIFIED BY 12345 DEFAULT TABLESPACE pepClDatos TEMPORARY TABLESPACE pepClTemp;

CREATE USER CAMILOAGENTEB IDENTIFIED BY 12345 DEFAULT TABLESPACE camClDatos TEMPORARY TABLESPACE camCLTemp;

GRANT dba TO BANCO;
GRANT connect TO BANCO;
GRANT resource TO BANCO;
*/

/* DENTRO DE BANCO */
CREATE ROLE cliente;

GRANT connect TO cliente;
GRANT create session TO cliente;
GRANT EXECUTE ON pk_bancos TO cliente;

GRANT cliente TO PEPEAGENTEB;
GRANT cliente TO CAMILOAGENTEB;

DROP SEQUENCE MOVIMIENTOS_SEQ;

CREATE SEQUENCE MOVIMIENTOS_SEQ
START WITH     1
INCREMENT BY   1
NOCACHE
NOCYCLE;

GRANT SELECT ON V_TITULARES_CUENTAS TO cliente;
GRANT SELECT ON BANCO TO cliente;
GRANT SELECT ON TITULAR TO cliente;
GRANT SELECT ON CUENTA TO cliente;
GRANT SELECT ON CONCEPTO TO cliente;
GRANT SELECT ON DETALLEMOVIMIENTO TO cliente;
GRANT SELECT ON MOVIMIENTO TO cliente;

GRANT INSERT ON MOVIMIENTO TO cliente;
GRANT INSERT ON DETALLEMOVIMIENTO TO cliente;


/*

---------- listar tablas ------- 
SELECT table_name,owner FROM all_tables WHERE owner='BANCO';

----Para leer o escribir archivos es necesario crear un objeto directory desde SQL: ------
-- Desde Banco --
create directory dir_tmp as 'C:\temporal\banco\facturas';
grant read, write on directory dir_tmp to cliente;

---- Permisos de UTL_FILE -----
conn / as sysdba

grant execute on UTL_FILE TO BANCO;
grant execute on UTL_FILE TO cliente;

*/