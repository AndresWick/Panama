DROP FUNCTION fu_programacion_diaria;
DROP TYPE gtt_tablapaso;
DROP TYPE gto_paso;

create or replace type gto_paso as object (
  k_num_serie  number(8),
  f_salida date,
  n_puerto_salida varchar2 (20),
  f_llegada date,
  n_puerto_llegada varchar2 (20),
  n_esclusa varchar2(10),
  f_eta date
);
/


create or replace type gtt_tablapaso as table of gto_paso;
/


CREATE OR REPLACE FUNCTION fu_programacion_diaria(pf_eta date)
	RETURN gtt_tablapaso 
	IS
		ltmptabla gtt_tablapaso;
	BEGIN
		select 
		cast( multiset( 
		SELECT * FROM infopasos WHERE f_eta = pf_eta    
			) as gtt_tablapaso)
		into ltmptabla
		from dual;        
RETURN ltmptabla;
END;
/
