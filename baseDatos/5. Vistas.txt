CREATE VIEW infoPasos AS (SELECT R.k_num_serie, R.f_salida, R.n_puerto_salida, R.f_llegada, R.n_puerto_llegada, P.n_esclusa, R.f_eta FROM reserva R, paso P WHERE R.k_id = P.k_idReserva);

CREATE VIEW pasosAgente AS (SELECT P.f_fecha, R.k_num_serie, R.n_sentido, P.v_costo, R.k_idAgente, P.k_id FROM paso P, reserva R WHERE P.k_idreserva = R.k_id);

CREATE VIEW abonos AS (SELECT SUM(v_valor) v_abono, k_idreferencia FROM pagoReserva GROUP BY k_idreferencia);

CREATE VIEW reservasAgente AS (SELECT R.k_id, R.f_eta, R.k_num_serie, R.v_costo, NVL(A.v_abono,0) v_abono, NVL((R.v_costo - A.v_abono),R.v_costo) v_deuda, R.k_idAgente FROM reserva R LEFT JOIN abonos A ON R.k_id = A.k_idreferencia);